(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[25],{63367:function(n){"use strict";n.exports=function(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<n.length;r++){var o=n.charAt(r),i=o.charCodeAt(0);if(255!==e[i])throw new TypeError(o+" is ambiguous");e[i]=r}var a=n.length,c=n.charAt(0),s=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function p(n){if("string"!==typeof n)throw new TypeError("Expected String");if(0===n.length)return new Uint8Array;for(var t=0,r=0,o=0;n[t]===c;)r++,t++;for(var i=(n.length-t)*s+1>>>0,u=new Uint8Array(i);n[t];){var p=e[n.charCodeAt(t)];if(255===p)return;for(var l=0,h=i-1;(0!==p||l<o)&&-1!==h;h--,l++)p+=a*u[h]>>>0,u[h]=p%256>>>0,p=p/256>>>0;if(0!==p)throw new Error("Non-zero carry");o=l,t++}for(var d=i-o;d!==i&&0===u[d];)d++;for(var f=new Uint8Array(r+(i-d)),E=r;d!==i;)f[E++]=u[d++];return f}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";for(var t=0,r=0,o=0,i=e.length;o!==i&&0===e[o];)o++,t++;for(var s=(i-o)*u+1>>>0,p=new Uint8Array(s);o!==i;){for(var l=e[o],h=0,d=s-1;(0!==l||h<r)&&-1!==d;d--,h++)l+=256*p[d]>>>0,p[d]=l%a>>>0,l=l/a>>>0;if(0!==l)throw new Error("Non-zero carry");r=h,o++}for(var f=s-r;f!==s&&0===p[f];)f++;for(var E=c.repeat(t);f<s;++f)E+=n.charAt(p[f]);return E},decodeUnsafe:p,decode:function(n){var e=p(n);if(e)return e;throw new Error("Non-base"+a+" character")}}}},51671:function(n,e,t){var r=t(63367);n.exports=r("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},42025:function(n,e,t){"use strict";t.r(e),t.d(e,{FractalWalletAdapterImpl:function(){return k}});var r,o,i=t(24611),a=t(53755),c=t(47061),s=t(59900);!function(n){n.PROJECT_APPROVED="PROJECT_APPROVED",n.HANDSHAKE="HANDSHAKE",n.HANDSHAKE_ACK="HANDSHAKE_ACK",n.SIGNED_TRANSACTION="SIGNED_TRANSACTION",n.FAILED_TO_SIGN_TRANSACTION="FAILED_TO_SIGN_TRANSACTION",n.TRANSACTION_DENIED="TRANSACTION_DENIED",n.SOLANA_WALLET_ADAPTER_APPROVED="SOLANA_WALLET_ADAPTER_APPROVED",n.SOLANA_WALLET_ADAPTER_DENIED="SOLANA_WALLET_ADAPTER_DENIED",n.POPUP_CLOSED="POPUP_CLOSED",n.TRANSACTION_SIGNATURE_NEEDED="TRANSACTION_SIGNATURE_NEEDED",n.TRANSACTION_SIGNATURE_NEEDED_RESPONSE="TRANSACTION_SIGNATURE_NEEDED_RESPONSE",n.AUTH_LOADED="AUTH_LOADED",n.MESSAGE_SIGNATURE_NEEDED="MESSAGE_SIGNATURE_NEEDED",n.MESSAGE_SIGNATURE_NEEDED_RESPONSE="MESSAGE_SIGNATURE_NEEDED_RESPONSE"}(r||(r={})),function(n){n.UNKNOWN="UNKNOWN",n.REACT_SDK="REACT_SDK",n.SOLANA_WALLET_ADAPTER="SOLANA_WALLET_ADAPTER"}(o||(o={}));var u=t(745),p=function(){function n(e,t){(0,c.Z)(this,n),this.validatedOrigin=e,this.targetWindow=t,this.handlers=new Map}return(0,s.Z)(n,[{key:"off",value:function(n,e){var t=this.handlers.get(n);null===t||void 0===t||t.delete(e)}},{key:"on",value:function(n,e){var t,r=null!==(t=this.handlers.get(n))&&void 0!==t?t:new Set;r.add(e),this.handlers.set(n,r)}},{key:"send",value:function(n){var e=n.event,t=n.payload;this.targetWindow.postMessage({event:e,payload:t},this.validatedOrigin)}},{key:"runHandlersForEvent",value:function(n,e){var t=this.handlers.get(n);if(t){var r,o=(0,u.Z)(t);try{for(o.s();!(r=o.n()).done;){(0,r.value)(e)}}catch(i){o.e(i)}finally{o.f()}}}},{key:"resetHandlers",value:function(){this.handlers.clear()}},{key:"export",value:function(){return{off:this.off.bind(this),on:this.on.bind(this),send:this.send.bind(this),validatedOrigin:this.validatedOrigin}}}]),n}(),l=600;var h=["resizable","scrollbars=1","status=1"];function d(n){var e=n.left,t=void 0===e?0:e,r=n.scope,o=void 0===r?window:r,i=n.top,a=void 0===i?0:i,c=n.width,s=void 0===c?l:c,u=n.height,p=void 0===u?l:u,d=n.url;return o.open(d,"fractal:approval:popup",function(n){var e=n.height,t=n.left,r=n.top,o=n.width;return["popup","left=".concat(t),"top=".concat(r),"width=".concat(o),"height=".concat(e)].concat(h).join(",")}({height:p,left:t,top:a,width:s}))}var f=function(){function n(e){var t=this;(0,c.Z)(this,n),this.platform=e,this.connection=null,this.popupWindow=null,this.handleMessage=function(n){var e,o;if("https://www.fractal.is"===(i=n.origin)||"https://fractal.is"===i){var i,a=n.origin;if(t.popupWindow){if(n.data.event===r.HANDSHAKE&&!t.connection){if(!t.verifyAndResetNonce(null===(e=n.data.payload)||void 0===e?void 0:e.nonce))return;t.popupWindow.postMessage({event:r.HANDSHAKE_ACK,payload:{platform:t.platform}},a),t.connection=new p(a,t.popupWindow),null===(o=t.connectionUpdatedCallback)||void 0===o||o.call(t,t.connection)}t.connection&&(t.connection.runHandlersForEvent(n.data.event,n.data.payload),n.data.event===r.POPUP_CLOSED&&t.connection&&(t.resetConnection(),t.popupWindow=null))}}}}return(0,s.Z)(n,[{key:"initialize",value:function(){return window.addEventListener("message",this.handleMessage),this}},{key:"tearDown",value:function(){return window.removeEventListener("message",this.handleMessage),this.resetConnection(),this}},{key:"open",value:function(n){var e,t=n.url,r=n.widthPx,o=void 0===r?400:r,i=n.heightPx,a=void 0===i?l:i,c=n.nonce;if((null===(e=this.popupWindow)||void 0===e?void 0:e.closed)&&this.resetConnectionAndPopupWindow(),!this.popupWindow){this.initialize(),c&&(this.nonce=c);var s=window.screenX+(window.innerWidth-o)/2,u=window.screenY+(window.innerHeight-a)/2;this.popupWindow=d({height:a,left:s,top:u,url:t,width:o})}}},{key:"close",value:function(){this.popupWindow&&(this.popupWindow.close(),this.resetConnectionAndPopupWindow())}},{key:"onConnectionUpdated",value:function(n){return this.connectionUpdatedCallback=n,this}},{key:"getConnection",value:function(){return this.connection}},{key:"resetConnectionAndPopupWindow",value:function(){this.resetConnection(),this.popupWindow=null}},{key:"resetConnection",value:function(){var n,e;null===(n=this.connection)||void 0===n||n.resetHandlers(),this.connection=null,null===(e=this.connectionUpdatedCallback)||void 0===e||e.call(this,this.connection)}},{key:"verifyAndResetNonce",value:function(n){if(!this.nonce)return!0;var e=n===this.nonce;return e&&(this.nonce=void 0),e}}]),n}();t(19148);function E(n){return null!==n&&"object"===typeof n}function v(n){return!!E(n)&&("solanaPublicKey"in n&&"string"===typeof n.solanaPublicKey)}function A(n){return!!E(n)&&("signedB58Transactions"in n&&(!!Array.isArray(n.signedB58Transactions)&&n.signedB58Transactions.every((function(n){return"string"===typeof n}))))}function w(n){return!!E(n)&&("decodedSignature"in n&&"string"===typeof n.decodedSignature)}var g=t(24269),N=t(74086),y=function(n){(0,g.Z)(t,n);var e=(0,N.Z)(t);function t(n,r){var o;return(0,c.Z)(this,t),(o=e.call(this,n)).error=r,o}return(0,s.Z)(t)}((0,t(17204).Z)(Error)),S=function(n){(0,g.Z)(t,n);var e=(0,N.Z)(t);function t(){var n;return(0,c.Z)(this,t),(n=e.apply(this,arguments)).name="WalletConnectionError",n}return(0,s.Z)(t)}(y),T=function(n){(0,g.Z)(t,n);var e=(0,N.Z)(t);function t(){var n;return(0,c.Z)(this,t),(n=e.apply(this,arguments)).name="WalletPublicKeyError",n}return(0,s.Z)(t)}(y),_=function(n){(0,g.Z)(t,n);var e=(0,N.Z)(t);function t(){var n;return(0,c.Z)(this,t),(n=e.apply(this,arguments)).name="WalletNotConnectedError",n}return(0,s.Z)(t)}(y),D=function(n){(0,g.Z)(t,n);var e=(0,N.Z)(t);function t(){var n;return(0,c.Z)(this,t),(n=e.apply(this,arguments)).name="WalletSignMessageError",n}return(0,s.Z)(t)}(y),P=function(n){(0,g.Z)(t,n);var e=(0,N.Z)(t);function t(){var n;return(0,c.Z)(this,t),(n=e.apply(this,arguments)).name="WalletSignTransactionError",n}return(0,s.Z)(t)}(y),O=t(31401),R=t(51671);function M(){return"".concat(m()).concat(m()).concat(m())}function m(){return(Math.random()+1).toString(36).substring(7)}var C="Unknown Error",Z="https://fractal.is",U="".concat(Z,"/wallet-adapter/approve"),b="".concat(Z,"/wallet-adapter/sign"),I="".concat(Z,"/wallet-adapter/sign/message"),L="RdxqNYxF",k=function(){function n(){(0,c.Z)(this,n),this.popupManager=new f(o.SOLANA_WALLET_ADAPTER),this.publicKey=null,this.connecting=!1}return(0,s.Z)(n,[{key:"getPublicKey",value:function(){return this.publicKey}},{key:"connect",value:function(){var n=(0,a.Z)((0,i.Z)().mark((function n(){var e,t,o,a,c,s,u,p=this;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(o=window.localStorage.getItem(L))){n.next=4;break}return this.publicKey=new O.nh(o),n.abrupt("return",Promise.resolve());case 4:return a=M(),this.popupManager.open({nonce:a,url:"".concat(U,"/").concat(a)}),c=function(n){if(!v(n))return t(new S("Malformed payload when setting up connection. Expected { solanaPublicKey: string } but "+"received ".concat(JSON.stringify(n)))),void p.popupManager.close();try{p.publicKey=new O.nh(n.solanaPublicKey),window.localStorage.setItem(L,n.solanaPublicKey),e()}catch(o){var r=new T(o instanceof Error?o.message:C,o);t(r)}p.popupManager.close()},s=function(){t(new S("The user denied the connection.")),p.popupManager.close()},u=function(){t(new S("The user denied the connection.")),p.popupManager.close()},this.popupManager.onConnectionUpdated((function(n){n&&(n.on(r.SOLANA_WALLET_ADAPTER_APPROVED,c),n.on(r.SOLANA_WALLET_ADAPTER_DENIED,s),n.on(r.POPUP_CLOSED,u))})),n.abrupt("return",new Promise((function(n,r){e=n,t=r})));case 11:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()},{key:"disconnect",value:function(){var n=(0,a.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.popupManager.tearDown(),this.publicKey=null,window.localStorage.removeItem(L);case 3:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var n=(0,a.Z)((0,i.Z)().mark((function n(e){var t,r;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,this.checkWalletReadiness(),n.next=4,this.signTransactions([e]);case 4:return t=n.sent,n.abrupt("return",t[0]);case 8:throw n.prev=8,n.t0=n.catch(0),r=n.t0,n.t0 instanceof y||(r=new P(n.t0 instanceof Error?n.t0.message:C,n.t0)),r;case 13:case"end":return n.stop()}}),n,this,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},{key:"signAllTransactions",value:function(){var n=(0,a.Z)((0,i.Z)().mark((function n(e){var t,r;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,this.checkWalletReadiness(),n.next=4,this.signTransactions(e);case 4:return t=n.sent,n.abrupt("return",t);case 8:throw n.prev=8,n.t0=n.catch(0),r=n.t0,n.t0 instanceof y||(r=new P(n.t0 instanceof Error?n.t0.message:C,n.t0)),r;case 13:case"end":return n.stop()}}),n,this,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},{key:"signMessage",value:function(){var n=(0,a.Z)((0,i.Z)().mark((function n(e){var t,o,a,c,s,u,p,l=this;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=(new TextDecoder).decode(e),c=function(n){if(!w(n)){var e=new D("Malformed payload when signing message. Expected { decodedSignature: string } "+"but received ".concat(JSON.stringify(n)));return a(e),void l.popupManager.close()}var t=Uint8Array.from(n.decodedSignature.split(",").map((function(n){return Number(n)})));o(t),l.popupManager.close()},s=function(){a(new D("The user did not approve the message")),l.popupManager.close()},u=function(){var n,e={decodedMessage:t};null===(n=l.popupManager.getConnection())||void 0===n||n.send({event:r.MESSAGE_SIGNATURE_NEEDED,payload:e})},p=M(),this.popupManager.open({heightPx:Math.max(600,Math.floor(.8*window.innerHeight)),nonce:p,url:"".concat(I,"/").concat(p),widthPx:Math.min(850,Math.floor(.8*window.innerWidth))}),this.popupManager.onConnectionUpdated((function(n){n&&(n.on(r.MESSAGE_SIGNATURE_NEEDED_RESPONSE,c),n.on(r.TRANSACTION_DENIED,s),n.on(r.POPUP_CLOSED,s),n.on(r.AUTH_LOADED,u))})),n.abrupt("return",new Promise((function(n,e){o=n,a=e})));case 8:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}()},{key:"signTransactions",value:function(){var n=(0,a.Z)((0,i.Z)().mark((function n(e){var t,o,a,c,s,u,p=this;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=function(n){if(!A(n)){var e=new P("Malformed payload when signing transactions. Expected { signedB58Transactions: string[] } "+"but received ".concat(JSON.stringify(n)));return o(e),void p.popupManager.close()}var r=n.signedB58Transactions.map((function(n){return O.YW.from(R.decode(n))}));t(r),p.popupManager.close()},c=function(){o(new P("The user did not approve the transaction")),p.popupManager.close()},s=function(){var n,t={unsignedB58Transactions:e.map((function(n){return R.encode(n.serializeMessage())}))};null===(n=p.popupManager.getConnection())||void 0===n||n.send({event:r.TRANSACTION_SIGNATURE_NEEDED,payload:t})},u=M(),this.popupManager.open({heightPx:Math.max(600,Math.floor(.8*window.innerHeight)),nonce:u,url:"".concat(b,"/").concat(u),widthPx:Math.min(850,Math.floor(.8*window.innerWidth))}),this.popupManager.onConnectionUpdated((function(n){n&&(n.on(r.TRANSACTION_SIGNATURE_NEEDED_RESPONSE,a),n.on(r.TRANSACTION_DENIED,c),n.on(r.POPUP_CLOSED,c),n.on(r.AUTH_LOADED,s))})),n.abrupt("return",new Promise((function(n,e){t=n,o=e})));case 7:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}()},{key:"checkWalletReadiness",value:function(){if(null===this.publicKey)throw new _("`publicKey` is null. Did you forget to call `.connect()`?")}}]),n}()}}]);